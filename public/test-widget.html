<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altan Widget Test - WebSocket Debug</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .status {
            background: #e6fffa;
            border-left: 4px solid #38b2ac;
            padding: 15px;
            margin: 20px 0;
        }
        .debug {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Widget Test - WebSocket Debug</h1>
        
        <div class="status">
            <strong>âœ… Widget Status:</strong> Testing WebSocket timeout fixes
        </div>

        <div class="debug">
            <h3>ğŸ” Debug Console Messages to Watch For:</h3>
            <ul>
                <li><strong>ğŸ¤– SDK: Creating agent session</strong> - Initial auth request</li>
                <li><strong>âœ… SDK: Agent session created</strong> - Auth successful</li>
                <li><strong>ğŸš€ SDK: Iframe loaded</strong> - Iframe ready</li>
                <li><strong>ğŸ” SDK: Sending authentication data</strong> - Token sent</li>
                <li><strong>ğŸ”„ SDK: Periodic token refresh</strong> - Preventing timeouts</li>
                <li><strong>ğŸŒ SDK: WebSocket status</strong> - Connection status</li>
            </ul>
        </div>

        <div style="height: 300px; text-align: center; padding-top: 120px; color: #666;">
            <p>ğŸ” Look for the floating text field at the bottom!</p>
            <p>Open browser console to see debug messages.</p>
        </div>
    </div>

    <!-- Debug logging -->
    <script>
        console.log('ğŸ¬ Test page loaded');
        
        // Enhanced event listeners
        document.addEventListener('altan-auth-success', (event) => {
            console.log('âœ… Widget Event: Authentication successful', event.detail);
        });

        document.addEventListener('altan-conversation-ready', (event) => {
            console.log('ğŸ’¬ Widget Event: Conversation ready', event.detail);
        });

        document.addEventListener('altan-error', (event) => {
            console.error('âŒ Widget Event: Error occurred', event.detail);
        });
    </script>

    <!-- THE WIDGET -->
    <script 
        src="./sdk/altan-widget.js"
        data-account-id="afd0ea2c-b44a-475b-b433-096eece24085"
        data-agent-id="10a3835b-c8a3-4bbd-b9be-a3a7dea7bc11"
        data-placeholder="Test WebSocket fixes..."
        data-guest-name="Debug Tester"
    ></script>
</body>
</html> 